# msg-queue-exercise
这是一个消息队列的练习，使用了线程池和Lock，采用类似模块化的设计，并给每个订阅者也维护了一个专属于自己的消息缓存队列，可以稍作扩展后便转化为一个IM系统，运行时采用在控制台输入指令的方式进行订阅者的注册、订阅、退订以及发布者发布消息等。

#可用指令介绍:
阅前说明:各个指令的参数的数量是固定的,且不允许为空,随意修改可能会提示指令非法  
1.订阅者注册指令:  
$registSubcriber [订阅者名称]  
**注意**:订阅者名称不能为空

2.订阅者订阅指令:
$subscribeQueue [订阅者名称] [订阅者要订阅的队列的名称]  
**注意**:(1)订阅者未注册的情况下,订阅会失败;(2)订阅者要订阅的队列不存在时,默认会使用该队列名称创建一个新的队列

3.订阅者退订指令:
$unsubscribeQueue [订阅者名称] [订阅者要退订的队列的名称]  
**注意**:(1)订阅者未注册的情况下,退订会提示错误信息;(2)订阅者要退订的队列不存在时,不会创建一个新的队列,并提示错误信息;(3)该队列中不包含该订阅者的订阅信息时,会提示错误信息

4.发布消息指令:
$pushMsg [发布者名称] [消息内容] [消息要发布到的队列的名称]  
**注意**:(1)目前系统中未对发布者进行管理维护;(2)消息内容不允许为空

5.停止测试指令  
$close  
**注意**:此命令只会停止主线程,而不会停止线程池中的线程,若需完全停止,请手动停止项目运行,或修改代码中线程池的线程存活时间设置等。

#测试指令范例:  
$pushMsg 发布者1 这是一条队列中的待拉取消息1 发布者创建的队列1  
$pushMsg 发布者1 这是一条队列中的待拉取消息2 发布者创建的队列1  
$pushMsg 发布者2 这是一条队列中的待拉取消息3 发布者创建的队列1  
$subscribeQueue 订阅者1 发布者创建的队列1  
$registSubcriber 订阅者1  
$subscribeQueue 订阅者1 发布者创建的队列1  
$registSubcriber 订阅者2  
$pushMsg 发布者2 这是一条仅有一个订阅者时的即时推送消息1 发布者创建的队列1  
$subscribeQueue 订阅者2 发布者创建的队列1  
$pushMsg 发布者2 这是一条有两个订阅者时的即时推送消息1 发布者创建的队列1  
$subscribeQueue 订阅者2 订阅者创建的队列1  
$pushMsg 发布者1 这是一条即时推送消息2 订阅者创建的队列1  
$unsubscribeQueue 订阅者2 订阅者创建的队列1  
$pushMsg 发布者1 这是一条即时推送消息3 订阅者创建的队列1  
$unsubscribeQueue 订阅者2 发布者创建的队列1  
$pushMsg 发布者1 这是一条即时推送消息4 发布者创建的队列1  
$subscribeQueue 订阅者2 订阅者创建的队列1  
$close
